{% extends 'base.html' %}

{% block extra_css %}
{% endblock %}

{% block body_content %}
<div class="row">
  <div class="col-md-8 offset-md-2">
    <div class="project-description">
        <h4>{{ project.title }}</h4>
        <h6>{{ project.summary }}</h6>

        <br>
        <h5>Issues:</h5>
        <ul class="list-group list-group-flush">
          <li class="list-group-item">
            <div class="filter-buttons">
              <a class="filter" href="{% url 'issues:project_details' project_id=project.id filter_term='open' %}">Open</a>
              <a class="filter" href="{% url 'issues:project_details' project_id=project.id filter_term='closed' %}">Closed</a>
            </div>
          </li>
        {% for issue in issue_list %}
          <li class="list-group-item">
            <h4><a class="item-title" href="{% url 'issues:issue_details' issue.id %}">{{ issue.title }}</a></h4>
            <div class="item-info">
              <p> Project: {{ issue.project }}</p>
              <p> {{ issue.issue_status }} &nbsp; &nbsp; &nbsp; {{ issue.priority }}</p>
            </div>
            <div class="item-dates">
              <p> Created By: {{ issue.created_by }} -- {{ issue.created_on }}</p>
              <p> Last Updated: {{ issue.modified_on }}</p>
            </div>
          </li>
        {% endfor %}
        </ul>
    </div>
  </div>
</div>

{% if user in project.assigned_users.all %}
<div class="row">
  <div class="col-md-3 offset-md-2">
    <a class="btn btn-info right mr-2" href="{% url 'issues:update_project' project.id %}">Update Project</a>
  </div>
  <div class="col-md-3 offset-md-2">
    <a class="btn btn-info right mr-2" href="{% url 'issues:create_issue' project.id %}">Create Issue</a>
  </div>
  <div class="col-md-3 offset-md-2">
    <form action="{% url 'issues:delete_project' project.id %}" method="post">
       {% csrf_token %}
       <input class="btn btn-info right mr-2" id="delete-btn" type="submit" value="Delete Project" onclick="return confirm('Are you sure you want to delete this project?')">
    </form>
  </div>
</div>
{% endif %}
{% endblock %}
